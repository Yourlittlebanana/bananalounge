{
	"info": {
		"_postman_id": "50381953-2cc9e968-88be-4903-b306-aaf0e98f686e",
		"name": "Trello requests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get",
			"item": [
				{
					"name": "Boards",
					"item": [
						{
							"name": "get boards",
							"id": "50381953-3085669b-bfe8-4306-9298-853c0d6409c1",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://api.trello.com/1/members/purpurr11@gmail.com/boards?key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"members",
										"purpurr11@gmail.com",
										"boards"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										},
										{
											"key": "fields",
											"value": "id",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "get one board",
							"id": "50381953-c81bf696-a115-4df1-909b-af9a3ffa44ec",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://api.trello.com/1/boards/{{board_id}}?key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"boards",
										"{{board_id}}"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"id": "50381953-9e90ff06-0712-4ea2-b43f-cec65593359f"
				},
				{
					"name": "Cards",
					"item": [
						{
							"name": "get one card",
							"id": "50381953-f14bc119-0be6-45b8-8eac-0cca26c62170",
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true
								}
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://api.trello.com/1/cards/PMwTe42z?key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"cards",
										"PMwTe42z"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								},
								"description": "id карточки можно взять из url на борде [https://trello.com/c/<b>IImrxKKQ</b>/9-test-card<br>](https://trello.com/c/IImrxKKQ/9-test-card)либо из json по запросу get all board cards \"shortLink\": \"PMwTe42z\" где значение = card_id"
							},
							"response": []
						},
						{
							"name": "get all board cards",
							"id": "50381953-18d994d3-7ac8-46a6-810a-8fbc5351e2e1",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://api.trello.com/1/boards/{{board_id}}/cards?key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"boards",
										"{{board_id}}",
										"cards"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"id": "50381953-ef2f7c74-c938-46c7-9638-b8167e2c1812"
				}
			],
			"id": "50381953-e258662f-9925-486c-ba80-c0ae69566e66"
		},
		{
			"name": "Post",
			"item": [
				{
					"name": "create board",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "9c5097a0-20b1-4d4d-93ac-9968bffed6e3",
								"exec": [
									"function randomText(length) {",
									"    const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';",
									"    let res = '';",
									"    for (let i = 0; i < length; i++) {",
									"        res += chars.charAt(Math.floor(Math.random() * chars.length));",
									"    }",
									"    return res;",
									"}",
									"",
									"pm.variables.set(\"boardName\", randomText(10)); // согласно документации, максимальная длина имени доски - 16384 символов, минимальная - 1 символ.",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "859596f3-2cf4-4503-9be1-d1dd056cbfa6",
								"exec": [
									"let jsonData;",
									"pm.test(\"Response is a valid JSON\", function () {",
									"    jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an(\"object\");",
									"});",
									"",
									"pm.test (\"check status code\", function() {",
									"    pm.response.to.have.status(200)",
									"});",
									"",
									"pm.test(\"Response time < 1000 ms)\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);",
									"});",
									"",
									"pm.test(\"Board id is present and not empty\", function () {",
									"    pm.expect(jsonData).to.have.property(\"id\");",
									"    pm.expect(jsonData.id).to.be.a(\"string\").and.not.empty;",
									"});",
									"",
									"pm.test(\"Board name equals requested name\", function () {",
									"    // Берём name из query-параметров текущего запроса",
									"    const requestedName = pm.request.url.query",
									"        .find(q => q.key === \"name\")?.value;",
									"",
									"    pm.expect(requestedName).to.be.a(\"string\").and.not.empty;",
									"    pm.expect(jsonData).to.have.property(\"name\");",
									"    pm.expect(jsonData.name).to.eql(requestedName);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "50381953-31eba95a-8f30-4d5a-bb37-53a1a88f4caf",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{host}}/1/boards/?name={{boardName}}&key={{key}}&token={{token}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"1",
								"boards",
								""
							],
							"query": [
								{
									"key": "name",
									"value": "{{boardName}}"
								},
								{
									"key": "key",
									"value": "{{key}}"
								},
								{
									"key": "token",
									"value": "{{token}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"id": "50381953-0aad1094-2195-48b7-9dc4-17cd401338e8"
		}
	]
}