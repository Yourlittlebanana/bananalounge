{
	"info": {
		"_postman_id": "50381953-2cc9e968-88be-4903-b306-aaf0e98f686e",
		"name": "Trello requests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get",
			"item": [
				{
					"name": "Boards",
					"item": [
						{
							"name": "Negative",
							"item": [
								{
									"name": "get boards (invalid token)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "31d8e453-f30e-481a-8372-8c9c5582fbeb",
												"exec": [
													"pm.test (\"check status code\", function() {",
													"    pm.response.to.have.status(401)",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"id": "50381953-044af3a7-4a28-4f42-bb08-90f683704258",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://api.trello.com/1/members/purpurr11@gmail.com/boards?key={{key}}&token=ATTA1e3da76fa017c1f5cd27a96a09c3f2d846235f833ddce283ec88e4a519eb674eD54CE740o",
											"protocol": "https",
											"host": [
												"api",
												"trello",
												"com"
											],
											"path": [
												"1",
												"members",
												"purpurr11@gmail.com",
												"boards"
											],
											"query": [
												{
													"key": "key",
													"value": "{{key}}"
												},
												{
													"key": "token",
													"value": "ATTA1e3da76fa017c1f5cd27a96a09c3f2d846235f833ddce283ec88e4a519eb674eD54CE740o"
												},
												{
													"key": "fields",
													"value": "id",
													"disabled": true
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "get one board (invalid board id)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a7769122-1da4-4053-9092-3d317bf9a734",
												"exec": [
													"pm.test (\"check status code\", function() {",
													"    pm.response.to.have.status(400)",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"id": "50381953-3034a45c-4e4a-4861-8436-cef1178e7376",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://api.trello.com/1/boards/invalidID?key={{key}}&token={{token}}",
											"protocol": "https",
											"host": [
												"api",
												"trello",
												"com"
											],
											"path": [
												"1",
												"boards",
												"invalidID"
											],
											"query": [
												{
													"key": "key",
													"value": "{{key}}"
												},
												{
													"key": "token",
													"value": "{{token}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"id": "50381953-ae55e2d8-7006-4a64-8f71-398232040343"
						},
						{
							"name": "get boards",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "99056dc6-d5f4-4900-8ce1-4b243fe75c19",
										"exec": [
											"const schema = {",
											"  \"$schema\": \"http://json-schema.org/draft-07/schema#\",",
											"  \"type\": \"array\",",
											"  \"items\": {",
											"    \"type\": \"object\",",
											"    \"properties\": {",
											"      \"id\": { \"type\": \"string\" },",
											"      \"name\": { \"type\": \"string\" }",
											"    },",
											"    \"required\": [\"id\", \"name\"],",
											"    \"additionalProperties\": true",
											"  }",
											"};",
											"",
											"pm.environment.set(\"schema\", JSON.stringify(schema));"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "8453b56c-ee9b-45bc-b127-65ac01e087d6",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test (\"check status code\", function() {",
											"    pm.response.to.have.status(200)",
											"});",
											"",
											"pm.test (\"check response has json body\", function(){",
											"    pm.response.to.have.jsonBody() ",
											"});",
											"",
											"pm.test (\"check data\", function(){",
											"    pm.expect(jsonData).to.be.an('array')",
											"});",
											"",
											"pm.test (\"check id and name of each board\", function(){",
											"    jsonData.forEach(board => {",
											"        pm.expect(board).to.have.property('id');",
											"        pm.expect(board).to.have.property('name');",
											"    })",
											"});",
											"",
											"// const jsonSchema = JSON.parse(pm.environment.get(\"schema\"));",
											"// const validationResult = tv4.validationMultiple(jsonData, jsonSchema);",
											"",
											"// pm.test (\"check validation of json scheme\", function(){",
											"//     pm.expect(validationResult).to.be.true;",
											"// });",
											"",
											"pm.test (\"check value for content type\", function(){",
											"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json; charset=utf-8'); // проверка заголовка ",
											"});",
											"",
											"pm.test (\"check response is limited to 5 boards\", function(){",
											"    pm.expect(jsonData.length).to.be.at.most(5); // проверка на количество элементов в массиве",
											"});",
											"",
											"pm.test(\"check validation of json schema\", function() {",
											"    const schemaString = pm.environment.get(\"schema\");",
											"    ",
											"    // Defensive guard: check if schema env var exists and is valid JSON",
											"    if (!schemaString) {",
											"        pm.expect.fail(\"Environment variable 'schema' is missing or empty\");",
											"        return;",
											"    }",
											"    ",
											"    let jsonSchema;",
											"    try {",
											"        jsonSchema = JSON.parse(schemaString);",
											"    } catch (e) {",
											"        pm.expect.fail(\"Environment variable 'schema' contains invalid JSON: \" + e.message);",
											"        return;",
											"    }",
											"",
											"     pm.response.to.have.jsonSchema(jsonSchema);",
											"});",
											"",
											"pm.test(\"check response is array with valid board objects\", function() {",
											"    pm.expect(jsonData).to.be.an('array');",
											"    jsonData.forEach((board, index) => {",
											"        pm.expect(board.id, `board[${index}].id should be a string`).to.be.a('string');",
											"        pm.expect(board.name, `board[${index}].name should be a string`).to.be.a('string');",
											"    });",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "50381953-3085669b-bfe8-4306-9298-853c0d6409c1",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://api.trello.com/1/members/purpurr11@gmail.com/boards?key={{key}}&token={{token}}&fields=id,name",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"members",
										"purpurr11@gmail.com",
										"boards"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										},
										{
											"key": "fields",
											"value": "id,name"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "get one board",
							"id": "50381953-c81bf696-a115-4df1-909b-af9a3ffa44ec",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://api.trello.com/1/boards/{{board_id}}?key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"boards",
										"{{board_id}}"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"id": "50381953-9e90ff06-0712-4ea2-b43f-cec65593359f"
				},
				{
					"name": "Cards",
					"item": [
						{
							"name": "Negative",
							"item": [
								{
									"name": "get one card (invalid card id)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "88a20456-aeb5-43ec-bd73-b8f346a41a89",
												"exec": [
													"pm.test(\"check status code 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"id": "50381953-7b42e749-837c-403b-bc64-87344e8a48be",
									"protocolProfileBehavior": {
										"disableBodyPruning": true,
										"disabledSystemHeaders": {
											"accept": true
										}
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "Accept",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "https://api.trello.com/1/cards/dhihijksadda?key={{key}}&token={{token}}",
											"protocol": "https",
											"host": [
												"api",
												"trello",
												"com"
											],
											"path": [
												"1",
												"cards",
												"dhihijksadda"
											],
											"query": [
												{
													"key": "key",
													"value": "{{key}}"
												},
												{
													"key": "token",
													"value": "{{token}}"
												}
											]
										},
										"description": "id карточки можно взять из url на борде [https://trello.com/c/<b>IImrxKKQ</b>/9-test-card<br>](https://trello.com/c/IImrxKKQ/9-test-card)либо из json по запросу get all board cards \"shortLink\": \"PMwTe42z\" где значение = card_id"
									},
									"response": []
								},
								{
									"name": "get all board cards (invalid card id)",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8adb835b-2f1b-47d0-beb2-d6ea07a02806",
												"exec": [
													"pm.test(\"check status code 400\", function () {",
													"    pm.response.to.have.status(400);",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"id": "50381953-69923e76-c5b1-401d-b8bd-59adabcbe515",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://api.trello.com/1/boards/692709f4fd60e0ba00a6cd64hhhh/cards?key={{key}}&token={{token}}",
											"protocol": "https",
											"host": [
												"api",
												"trello",
												"com"
											],
											"path": [
												"1",
												"boards",
												"692709f4fd60e0ba00a6cd64hhhh",
												"cards"
											],
											"query": [
												{
													"key": "key",
													"value": "{{key}}"
												},
												{
													"key": "token",
													"value": "{{token}}"
												}
											]
										}
									},
									"response": []
								}
							],
							"id": "50381953-fb1356b2-a51b-4544-bdcc-4859846276d5"
						},
						{
							"name": "get one card",
							"id": "50381953-f14bc119-0be6-45b8-8eac-0cca26c62170",
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true
								}
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://api.trello.com/1/cards/ZAbpl0xH?key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"cards",
										"ZAbpl0xH"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								},
								"description": "id карточки можно взять из url на борде [https://trello.com/c/<b>IImrxKKQ</b>/9-test-card<br>](https://trello.com/c/IImrxKKQ/9-test-card)либо из json по запросу get all board cards \"shortLink\": \"PMwTe42z\" где значение = card_id"
							},
							"response": []
						},
						{
							"name": "get all board cards",
							"id": "50381953-18d994d3-7ac8-46a6-810a-8fbc5351e2e1",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://api.trello.com/1/boards/{{board_id}}/cards?key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"boards",
										"{{board_id}}",
										"cards"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"id": "50381953-ef2f7c74-c938-46c7-9638-b8167e2c1812"
				},
				{
					"name": "List",
					"item": [
						{
							"name": "get list",
							"id": "50381953-c0606be9-27e3-4eed-a2da-9f68a8c6a4d6",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://api.trello.com/1/boards/693aca75b5321805d4a63a40/lists?key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"boards",
										"693aca75b5321805d4a63a40",
										"lists"
									],
									"query": [
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"id": "50381953-ecfab5e9-d07c-424d-ac98-9200db8cbc46"
				}
			],
			"id": "50381953-e258662f-9925-486c-ba80-c0ae69566e66"
		},
		{
			"name": "Post",
			"item": [
				{
					"name": "Negative",
					"item": [
						{
							"name": "create board (invalid name)",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "9c5097a0-20b1-4d4d-93ac-9968bffed6e3",
										"exec": [
											"function randomText(length) {",
											"    const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';",
											"    let res = '';",
											"    for (let i = 0; i < length; i++) {",
											"        res += chars.charAt(Math.floor(Math.random() * chars.length));",
											"    }",
											"    return res;",
											"}",
											"",
											"pm.variables.set(\"boardName\", randomText(10)); // согласно документации, максимальная длина имени доски - 16384 символов, минимальная - 1 символ.",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "859596f3-2cf4-4503-9be1-d1dd056cbfa6",
										"exec": [
											"let jsonData;",
											"pm.test(\"Response is a valid JSON\", function () {",
											"    jsonData = pm.response.json();",
											"    pm.expect(jsonData).to.be.an(\"object\");",
											"});",
											"",
											"pm.test (\"check status code\", function() {",
											"    pm.response.to.have.status(400)",
											"});",
											"",
											"pm.test(\"Response time < 1000 ms)\", function () {",
											"    pm.expect(pm.response.responseTime).to.be.below(1000);",
											"});",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "50381953-4f9dc63f-d979-44e3-817c-895fb1ef3692",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "{{host}}/1/boards/?name=&key={{key}}&token={{token}}",
									"host": [
										"{{host}}"
									],
									"path": [
										"1",
										"boards",
										""
									],
									"query": [
										{
											"key": "name",
											"value": ""
										},
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "create new card (invalid id list)",
							"id": "50381953-e866f67a-cfac-4808-a1aa-06703ad3bc1c",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "https://api.trello.com/1/cards?idList=693aca75b5321805d4a63a7800&key={{key}}&token={{token}}",
									"protocol": "https",
									"host": [
										"api",
										"trello",
										"com"
									],
									"path": [
										"1",
										"cards"
									],
									"query": [
										{
											"key": "idList",
											"value": "693aca75b5321805d4a63a7800"
										},
										{
											"key": "key",
											"value": "{{key}}"
										},
										{
											"key": "token",
											"value": "{{token}}"
										}
									]
								}
							},
							"response": []
						}
					],
					"id": "50381953-871ee0c0-8f3b-4791-9d89-be2ea837b024"
				},
				{
					"name": "create board",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "002a5538-2366-4334-919c-45aa88676085",
								"exec": [
									"function randomText(length) {",
									"    const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';",
									"    let res = '';",
									"    for (let i = 0; i < length; i++) {",
									"        res += chars.charAt(Math.floor(Math.random() * chars.length));",
									"    }",
									"    return res;",
									"}",
									"",
									"pm.variables.set(\"boardName\", randomText(3)); // согласно документации, максимальная длина имени доски - 16384 символов, минимальная - 1 символ.",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "30c8868a-cc45-4299-9956-efd6a273c63d",
								"exec": [
									"let jsonData;",
									"pm.test(\"Response is a valid JSON\", function () {",
									"    jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an(\"object\");",
									"});",
									"",
									"pm.test (\"check status code\", function() {",
									"    pm.response.to.have.status(200)",
									"});",
									"",
									"pm.test(\"Response time < 1000 ms)\", function () {",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);",
									"});",
									"",
									"pm.test(\"Board id is present and not empty\", function () {",
									"    pm.expect(jsonData).to.have.property(\"id\");",
									"    pm.expect(jsonData.id).to.be.a(\"string\").and.not.empty;",
									"});",
									"",
									"pm.test(\"Board name equals requested name\", function () {",
									"    // Берём name из query-параметров текущего запроса",
									"    const requestedName = pm.request.url.query",
									"        .find(q => q.key === \"name\")?.value;",
									"",
									"    pm.expect(requestedName).to.be.a(\"string\").and.not.empty;",
									"    pm.expect(jsonData).to.have.property(\"name\");",
									"    pm.expect(jsonData.name).to.eql(requestedName);",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "50381953-31eba95a-8f30-4d5a-bb37-53a1a88f4caf",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{host}}/1/boards/?name={{boardName}}&key={{key}}&token={{token}}&test=filename ",
							"host": [
								"{{host}}"
							],
							"path": [
								"1",
								"boards",
								""
							],
							"query": [
								{
									"key": "name",
									"value": "{{boardName}}"
								},
								{
									"key": "key",
									"value": "{{key}}"
								},
								{
									"key": "token",
									"value": "{{token}}"
								},
								{
									"key": "test",
									"value": "filename "
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create new card",
					"id": "50381953-f52eb779-1ff0-4f10-987e-ea30191939b7",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "https://{{host}}/1/cards?idList=5abbe4b7ddc1b351ef961414&key={{key}}&token={{token}}",
							"protocol": "https",
							"host": [
								"{{host}}"
							],
							"path": [
								"1",
								"cards"
							],
							"query": [
								{
									"key": "idList",
									"value": "5abbe4b7ddc1b351ef961414"
								},
								{
									"key": "key",
									"value": "{{key}}"
								},
								{
									"key": "token",
									"value": "{{token}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"id": "50381953-0aad1094-2195-48b7-9dc4-17cd401338e8"
		},
		{
			"name": "Put",
			"item": [
				{
					"name": "Negative",
					"item": [
						{
							"name": "update card Copy",
							"id": "50381953-a67e563a-cac0-4023-b389-9b9307c55392",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": []
							},
							"response": []
						}
					],
					"id": "50381953-42b9757a-ec7f-4d1d-806a-1c172dd16937"
				},
				{
					"name": "update card",
					"id": "50381953-d7c6e3c1-ecbf-4495-9632-ab86241f095a",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": []
					},
					"response": []
				},
				{
					"name": "update a board",
					"id": "50381953-312a92a4-d5c7-411e-a82f-4478b307afcb",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": []
					},
					"response": []
				}
			],
			"id": "50381953-be78e43e-c7fd-432d-8f0f-5af42f71591c"
		}
	]
}